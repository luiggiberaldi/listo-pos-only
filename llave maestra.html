<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LISTO POS - Llave Maestra v1.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
        body {
            font-family: 'JetBrains Mono', monospace;
            background-color: #0f172a;
            color: #e2e8f0;
        }
        .cyber-input {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid #334155;
            color: #fbbf24;
            transition: all 0.3s ease;
        }
        .cyber-input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
        }
        .cyber-btn {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            transition: all 0.2s;
        }
        .cyber-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(124, 58, 237, 0.4);
        }
        .cyber-btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl overflow-hidden relative">
        <!-- Top Decoration -->
        <div class="h-1 w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"></div>
        <div class="p-8 space-y-6 relative z-10">
            <div class="text-center space-y-2">
                <div
                    class="inline-flex items-center justify-center p-3 bg-slate-800 rounded-full mb-2 ring-1 ring-slate-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-indigo-400" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                </div>
                <h1 class="text-2xl font-bold tracking-tight text-white">LLAVE MAESTRA</h1>
                <p class="text-xs text-slate-500 uppercase tracking-widest">Generador de Licencias Offline</p>
            </div>
            <!-- Input Step -->
            <div class="space-y-2">
                <label class="text-xs font-bold text-slate-400 ml-1 uppercase">1. ID de Hardware (HWID)</label>
                <input type="text" id="hwidInput" placeholder="Ej: 78b7ace3b2..."
                    class="w-full p-4 rounded-lg cyber-input text-center text-sm placeholder-slate-600 font-mono tracking-wide"
                    autocomplete="off" spellcheck="false">
                <p class="text-[10px] text-slate-600 ml-1">Copia el código amarillo de la pantalla de bloqueo.</p>
            </div>
            <!-- Action -->
            <button onclick="generateLicense()"
                class="w-full py-4 rounded-lg font-bold text-white uppercase tracking-wider cyber-btn flex items-center justify-center gap-2">
                <span>Generar Desbloqueo</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4">
                    </path>
                </svg>
            </button>
            <!-- Output Step -->
            <div id="resultArea"
                class="hidden space-y-2 pt-4 border-t border-slate-800 animate-in fade-in slide-in-from-bottom-4 duration-500">
                <label class="text-xs font-bold text-emerald-400 ml-1 uppercase flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                    2. Licencia Generada
                </label>
                <div class="relative group cursor-pointer" onclick="copyToClipboard()">
                    <div id="licenseOutput"
                        class="w-full p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-lg text-emerald-400 text-center font-mono text-sm break-all hover:bg-emerald-500/20 transition-colors">
                        ...
                    </div>
                    <div
                        class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50 rounded-lg backdrop-blur-sm">
                        <span class="text-white text-xs font-bold uppercase">Click para Copiar</span>
                    </div>
                </div>
                <p class="text-[10px] text-slate-500 text-center mt-2">
                    Instrucciones: En la pantalla roja de bloqueo, busca el campo <strong>"¿Tienes una
                        Licencia?"</strong> y pega este código allí.
                </p>
            </div>
        </div>
    </div>
    <!-- LOGIC -->
    <script>
        const SALT = "LISTO_POS_V1_SECURE_SALT_998877";
        async function generateLicense() {
            const hwid = document.getElementById('hwidInput').value.trim();
            const resultArea = document.getElementById('resultArea');
            const licenseOutput = document.getElementById('licenseOutput');
            if (!hwid) {
                alert("Por favor ingresa el HWID primero.");
                return;
            }
            try {
                // SHA-256 Logic (Matches System)
                const msgBuffer = new TextEncoder().encode(hwid + SALT);
                const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
                const hashArray = Array.from(new Uint8Array(hashBuffer));
                const license = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
                // Display
                licenseOutput.innerText = license;
                resultArea.classList.remove('hidden');
            } catch (e) {
                console.error(e);
                alert("Error generando la licencia.");
            }
        }
        function copyToClipboard() {
            const text = document.getElementById('licenseOutput').innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert("Licencia copiada al portapapeles ✅");
            });
        }
    </script>
</body>
</html>